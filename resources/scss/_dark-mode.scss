// ===================================
// DARK MODE STYLES
// ===================================

[data-bs-theme="dark"] {
  // Color variables for dark mode
  --bs-body-color: #e9ecef;
  --bs-body-bg: #1a1d23;
  --bs-body-color-rgb: 233, 236, 239;
  --bs-body-bg-rgb: 26, 29, 35;

  --bs-emphasis-color: #fff;
  --bs-emphasis-color-rgb: 255, 255, 255;

  --bs-secondary-color: rgba(233, 236, 239, 0.75);
  --bs-secondary-color-rgb: 233, 236, 239, 0.75;
  --bs-secondary-bg: #343a40;
  --bs-secondary-bg-rgb: 52, 58, 64;

  --bs-tertiary-color: rgba(233, 236, 239, 0.5);
  --bs-tertiary-color-rgb: 233, 236, 239, 0.5;
  --bs-tertiary-bg: #2b3035;
  --bs-tertiary-bg-rgb: 43, 48, 53;

  --bs-primary-text-emphasis: #6ea8fe;
  --bs-secondary-text-emphasis: #a7acb1;
  --bs-success-text-emphasis: #75b798;
  --bs-info-text-emphasis: #6edff6;
  --bs-warning-text-emphasis: #ffda6a;
  --bs-danger-text-emphasis: #ea868f;
  --bs-light-text-emphasis: #f8f9fa;
  --bs-dark-text-emphasis:dee2e6;

  --bs-primary-bg-subtle: #031633;
  --bs-secondary-bg-subtle: #161c20;
  --bs-success-bg-subtle: #051e11;
  --bs-info-bg-subtle: #032830;
  --bs-warning-bg-subtle: #332701;
  --bs-danger-bg-subtle: #2c0b0e;
  --bs-light-bg-subtle: #343a40;
  --bs-dark-bg-subtle: #1a1d23;

  --bs-primary-border-subtle: #084298;
  --bs-secondary-border-subtle: #495057;
  --bs-success-border-subtle: #0f5132;
  --bs-info-border-subtle: #087990;
  --bs-warning-border-subtle: #997404;
  --bs-danger-border-subtle: #842029;
  --bs-light-border-subtle: #495057;
  --bs-dark-border-subtle: #343a40;

  --bs-heading-color: inherit;

  --bs-link-color: #6ea8fe;
  --bs-link-color-rgb: 110, 168, 254;
  --bs-link-decoration: underline;
  --bs-link-hover-color: #8bb9fe;
  --bs-link-hover-color-rgb: 139, 185, 254;

  --bs-code-color: #e685b5;
  --bs-highlight-color: #664d03;
  --bs-highlight-bg: #664d03;

  // Custom dark mode variables
  --sidebar-bg: linear-gradient(180deg, #1a1d23 0%, #2d3748 100%);
  --card-bg: #2b3035;
  --card-border: #495057;
  --input-bg: #343a40;
  --input-border: #495057;
  --table-bg: #2b3035;
  --table-border: #495057;
  --table-striped-bg: rgba(255, 255, 255, 0.02);
  --table-hover-bg: rgba(255, 255, 255, 0.05);

  // Background
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);

  // Component overrides
  .app-header {
    background: var(--bs-gray-800);
    border-bottom-color: var(--bs-gray-700);
  }

  .app-sidebar {
    background: var(--sidebar-bg);
  }

  .card {
    background-color: var(--card-bg);
    border-color: var(--card-border);
  }

  .table {
    --bs-table-bg: var(--table-bg);
    --bs-table-accent-bg: var(--table-striped-bg);
    --bs-table-hover-bg: var(--table-hover-bg);
    --bs-table-border-color: var(--table-border);
    --bs-table-striped-bg: var(--table-striped-bg);
    --bs-table-striped-color: var(--bs-body-color);
    --bs-table-active-bg: var(--table-hover-bg);
    --bs-table-active-color: var(--bs-body-color);
  }

  .form-control,
  .form-select {
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--bs-body-color);

    &:focus {
      background-color: var(--input-bg);
      border-color: var(--bs-primary);
      box-shadow: 0 0 0 0.2rem rgba(var(--bs-primary-rgb), 0.25);
    }

    &::placeholder {
      color: var(--bs-secondary-color);
    }
  }

  .form-text {
    color: var(--bs-secondary-color);
  }

  .form-check-input {
    background-color: var(--input-bg);
    border-color: var(--input-border);

    &:checked {
      background-color: var(--bs-primary);
      border-color: var(--bs-primary);
    }
  }

  .form-check-label {
    color: var(--bs-body-color);
  }

  .dropdown-menu {
    background-color: var(--card-bg);
    border-color: var(--card-border);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.3);

    .dropdown-item {
      color: var(--bs-body-color);

      &:hover {
        background-color: var(--bs-gray-700);
        color: var(--bs-white);
      }

      &.active {
        background-color: var(--bs-primary);
        color: var(--bs-white);
      }
    }

    .dropdown-divider {
      border-color: var(--bs-gray-600);
    }
  }

  .modal-content {
    background-color: var(--card-bg);
    color: var(--bs-body-color);
    border: 1px solid var(--bs-gray-600);
  }

  .modal-header {
    border-bottom-color: var(--bs-gray-600);
  }

  .modal-footer {
    border-top-color: var(--bs-gray-600);
  }

  .popover {
    background-color: var(--card-bg);
    border: 1px solid var(--bs-gray-600);
    color: var(--bs-body-color);

    .popover-header {
      background-color: var(--bs-gray-700);
      border-bottom-color: var(--bs-gray-600);
      color: var(--bs-white);
    }
  }

  .tooltip {
    --bs-tooltip-bg: var(--bs-gray-700);
    --bs-tooltip-color: var(--bs-white);
  }

  .alert {
    border: 1px solid var(--bs-gray-600);

    &.alert-success {
      background-color: rgba($success, 0.1);
      color: var(--bs-success-text-emphasis);
      border-color: var(--bs-success-border-subtle);
    }

    &.alert-info {
      background-color: rgba($info, 0.1);
      color: var(--bs-info-text-emphasis);
      border-color: var(--bs-info-border-subtle);
    }

    &.alert-warning {
      background-color: rgba($warning, 0.1);
      color: var(--bs-warning-text-emphasis);
      border-color: var(--bs-warning-border-subtle);
    }

    &.alert-danger {
      background-color: rgba($danger, 0.1);
      color: var(--bs-danger-text-emphasis);
      border-color: var(--bs-danger-border-subtle);
    }
  }

  .badge {
    &.bg-primary {
      background-color: var(--bs-primary-bg-subtle) !important;
      color: var(--bs-primary-text-emphasis) !important;
    }

    &.bg-secondary {
      background-color: var(--bs-secondary-bg-subtle) !important;
      color: var(--bs-secondary-text-emphasis) !important;
    }

    &.bg-success {
      background-color: var(--bs-success-bg-subtle) !important;
      color: var(--bs-success-text-emphasis) !important;
    }

    &.bg-info {
      background-color: var(--bs-info-bg-subtle) !important;
      color: var(--bs-info-text-emphasis) !important;
    }

    &.bg-warning {
      background-color: var(--bs-warning-bg-subtle) !important;
      color: var(--bs-warning-text-emphasis) !important;
    }

    &.bg-danger {
      background-color: var(--bs-danger-bg-subtle) !important;
      color: var(--bs-danger-text-emphasis) !important;
    }

    &.bg-light {
      background-color: var(--bs-light-bg-subtle) !important;
      color: var(--bs-light-text-emphasis) !important;
    }

    &.bg-dark {
      background-color: var(--bs-dark-bg-subtle) !important;
      color: var(--bs-dark-text-emphasis) !important;
    }
  }

  .btn {
    &.btn-outline-primary {
      border-color: var(--bs-primary);
      color: var(--bs-primary);

      &:hover {
        background-color: var(--bs-primary);
        border-color: var(--bs-primary);
        color: var(--bs-white);
      }
    }

    &.btn-outline-secondary {
      border-color: var(--bs-secondary);
      color: var(--bs-secondary);

      &:hover {
        background-color: var(--bs-secondary);
        border-color: var(--bs-secondary);
        color: var(--bs-white);
      }
    }

    &.btn-outline-success {
      border-color: var(--bs-success);
      color: var(--bs-success);

      &:hover {
        background-color: var(--bs-success);
        border-color: var(--bs-success);
        color: var(--bs-white);
      }
    }

    &.btn-outline-info {
      border-color: var(--bs-info);
      color: var(--bs-info);

      &:hover {
        background-color: var(--bs-info);
        border-color: var(--bs-info);
        color: var(--bs-white);
      }
    }

    &.btn-outline-warning {
      border-color: var(--bs-warning);
      color: var(--bs-warning);

      &:hover {
        background-color: var(--bs-warning);
        border-color: var(--bs-warning);
        color: var(--bs-gray-800);
      }
    }

    &.btn-outline-danger {
      border-color: var(--bs-danger);
      color: var(--bs-danger);

      &:hover {
        background-color: var(--bs-danger);
        border-color: var(--bs-danger);
        color: var(--bs-white);
      }
    }
  }

  .navbar {
    background-color: var(--bs-gray-800) !important;
    border-color: var(--bs-gray-700) !important;
  }

  .navbar-brand {
    color: var(--bs-white) !important;

    &:hover {
      color: var(--bs-white) !important;
    }
  }

  .navbar-nav {
    .nav-link {
      color: rgba(255, 255, 255, 0.75) !important;

      &:hover {
        color: var(--bs-white) !important;
      }

      &.active {
        color: var(--bs-white) !important;
      }
    }
  }

  .page-header {
    border-bottom-color: var(--bs-gray-700);

    .page-title {
      color: var(--bs-white);
    }

    .page-subtitle {
      color: var(--bs-gray-400);
    }

    .breadcrumb {
      .breadcrumb-item {
        color: var(--bs-gray-400);

        &.active {
          color: var(--bs-white);
        }

        + .breadcrumb-item::before {
          color: var(--bs-gray-500);
        }
      }
    }
  }

  .stats-card {
    background-color: var(--card-bg);
    border-color: var(--card-border);

    .stats-label {
      color: var(--bs-secondary-color);
    }
  }

  .sidebar-nav {
    background: transparent;
  }

  .timeline::before {
    background-color: var(--bs-gray-600);
  }

  .timeline-item {
    .timeline-content {
      background-color: var(--card-bg);
      color: var(--bs-body-color);
    }
  }

  .app-footer {
    background: var(--bs-gray-800);
    border-top-color: var(--bs-gray-700);
    color: var(--bs-gray-400);

    .footer-links a {
      color: var(--bs-gray-400);

      &:hover {
        color: var(--bs-primary);
      }
    }
  }

  // Custom scrollbar for dark mode
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--bs-gray-800);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--bs-gray-600);
    border-radius: 4px;

    &:hover {
      background: var(--bs-gray-500);
    }
  }

  // Chart.js dark mode fixes
  canvas {
    filter: invert(1) hue-rotate(180deg);
  }
}